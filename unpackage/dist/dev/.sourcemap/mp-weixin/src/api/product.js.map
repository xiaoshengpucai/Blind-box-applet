{"version":3,"file":"product.js","sources":["src/api/product.js"],"sourcesContent":["/**\r\n * 商品相关API\r\n * @description 商品数据的获取、搜索、筛选等接口\r\n */\r\nimport api from './index.js';\r\n\r\n// ==================== 商品API ====================\r\nexport const productApi = {\r\n  /**\r\n   * 获取商品列表\r\n   * @param {Object} params - 查询参数\r\n   * @param {number} params.page - 页码\r\n   * @param {number} params.pageSize - 每页数量\r\n   * @param {string} params.category - 分类ID\r\n   * @param {string} params.keyword - 搜索关键词\r\n   * @param {string} params.sortBy - 排序字段\r\n   * @param {string} params.sortOrder - 排序方向 asc|desc\r\n   * @returns {Promise} 商品列表数据\r\n   */\r\n  getProductList: (params = {}) => {\r\n    const {\r\n      page = 1,\r\n      pageSize = 20,\r\n      category,\r\n      keyword,\r\n      sortBy = 'createTime',\r\n      sortOrder = 'desc'\r\n    } = params;\r\n\r\n    return api.get('/products', {\r\n      page,\r\n      pageSize,\r\n      category,\r\n      keyword,\r\n      sortBy,\r\n      sortOrder\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 3 * 60 * 1000 // 3分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品详情\r\n   * @param {string} productId - 商品ID\r\n   * @returns {Promise} 商品详情数据\r\n   */\r\n  getProductDetail: (productId) => {\r\n    return api.get(`/products/${productId}`, null, {\r\n      cache: true,\r\n      cacheTime: 5 * 60 * 1000 // 5分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 搜索商品\r\n   * @param {Object} params - 搜索参数\r\n   * @param {string} params.keyword - 搜索关键词\r\n   * @param {number} params.page - 页码\r\n   * @param {number} params.pageSize - 每页数量\r\n   * @param {Array} params.filters - 筛选条件\r\n   * @returns {Promise} 搜索结果\r\n   */\r\n  searchProducts: (params) => {\r\n    const {\r\n      keyword,\r\n      page = 1,\r\n      pageSize = 20,\r\n      filters = []\r\n    } = params;\r\n\r\n    return api.get('/products/search', {\r\n      q: keyword,\r\n      page,\r\n      pageSize,\r\n      filters: JSON.stringify(filters)\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 2 * 60 * 1000 // 2分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取推荐商品\r\n   * @param {Object} params - 推荐参数\r\n   * @param {string} params.type - 推荐类型 hot|new|related\r\n   * @param {string} params.userId - 用户ID（个性化推荐）\r\n   * @param {number} params.limit - 数量限制\r\n   * @returns {Promise} 推荐商品列表\r\n   */\r\n  getRecommendedProducts: (params = {}) => {\r\n    const {\r\n      type = 'hot',\r\n      userId,\r\n      limit = 10\r\n    } = params;\r\n\r\n    return api.get('/products/recommended', {\r\n      type,\r\n      userId,\r\n      limit\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 10 * 60 * 1000 // 10分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品分类\r\n   * @param {string} parentId - 父分类ID（可选）\r\n   * @returns {Promise} 分类列表\r\n   */\r\n  getProductCategories: (parentId) => {\r\n    return api.get('/products/categories', {\r\n      parentId\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 30 * 60 * 1000 // 30分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品筛选条件\r\n   * @param {string} categoryId - 分类ID\r\n   * @returns {Promise} 筛选条件配置\r\n   */\r\n  getProductFilters: (categoryId) => {\r\n    return api.get(`/products/categories/${categoryId}/filters`, null, {\r\n      cache: true,\r\n      cacheTime: 20 * 60 * 1000 // 20分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品评价\r\n   * @param {string} productId - 商品ID\r\n   * @param {Object} params - 查询参数\r\n   * @param {number} params.page - 页码\r\n   * @param {number} params.pageSize - 每页数量\r\n   * @param {string} params.type - 评价类型 all|good|medium|bad\r\n   * @returns {Promise} 评价列表\r\n   */\r\n  getProductReviews: (productId, params = {}) => {\r\n    const {\r\n      page = 1,\r\n      pageSize = 10,\r\n      type = 'all'\r\n    } = params;\r\n\r\n    return api.get(`/products/${productId}/reviews`, {\r\n      page,\r\n      pageSize,\r\n      type\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 5 * 60 * 1000 // 5分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 添加商品到收藏\r\n   * @param {string} productId - 商品ID\r\n   * @returns {Promise} 操作结果\r\n   */\r\n  addToFavorites: (productId) => {\r\n    return api.post('/favorites', {\r\n      productId,\r\n      type: 'product'\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 从收藏中移除商品\r\n   * @param {string} productId - 商品ID\r\n   * @returns {Promise} 操作结果\r\n   */\r\n  removeFromFavorites: (productId) => {\r\n    return api.delete(`/favorites/${productId}`);\r\n  },\r\n\r\n  /**\r\n   * 获取用户收藏的商品\r\n   * @param {Object} params - 查询参数\r\n   * @returns {Promise} 收藏列表\r\n   */\r\n  getFavoriteProducts: (params = {}) => {\r\n    const {\r\n      page = 1,\r\n      pageSize = 20\r\n    } = params;\r\n\r\n    return api.get('/favorites/products', {\r\n      page,\r\n      pageSize\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品库存信息\r\n   * @param {string} productId - 商品ID\r\n   * @param {string} skuId - SKU ID（可选）\r\n   * @returns {Promise} 库存信息\r\n   */\r\n  getProductStock: (productId, skuId) => {\r\n    return api.get(`/products/${productId}/stock`, {\r\n      skuId\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 30 * 1000 // 30秒缓存（库存变化较快）\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取商品价格历史\r\n   * @param {string} productId - 商品ID\r\n   * @param {number} days - 天数\r\n   * @returns {Promise} 价格历史数据\r\n   */\r\n  getProductPriceHistory: (productId, days = 30) => {\r\n    return api.get(`/products/${productId}/price-history`, {\r\n      days\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 60 * 60 * 1000 // 1小时缓存\r\n    });\r\n  }\r\n};\r\n\r\n// ==================== 壁纸API（兼容原有接口）====================\r\nexport const wallpaperApi = {\r\n  /**\r\n   * 获取壁纸列表\r\n   * @param {Object} params - 查询参数\r\n   * @returns {Promise} 壁纸列表\r\n   */\r\n  getWallpaperList: (params = {}) => {\r\n    const {\r\n      classid = '65237031189f860b7613acf4',\r\n      pageNum = 1,\r\n      pageSize = 10\r\n    } = params;\r\n\r\n    return api.get('/bizhi/wallList', {\r\n      classid,\r\n      pageNum,\r\n      pageSize\r\n    }, {\r\n      cache: true,\r\n      cacheTime: 5 * 60 * 1000 // 5分钟缓存\r\n    });\r\n  },\r\n\r\n  /**\r\n   * 获取随机壁纸\r\n   * @param {Object} params - 查询参数\r\n   * @returns {Promise} 随机壁纸\r\n   */\r\n  getRandomWallpaper: (params = {}) => {\r\n    return api.get('/bizhi/random', params, {\r\n      cache: false // 随机壁纸不缓存\r\n    });\r\n  }\r\n};\r\n\r\n// ==================== 导出 ====================\r\nexport default {\r\n  ...productApi,\r\n  ...wallpaperApi\r\n};\r\n"],"names":["api"],"mappings":"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"}